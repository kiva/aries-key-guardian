import typeorm from 'typeorm';

@typeorm.Entity()
export class SmsOtp {

    /**
     * For simplicity we have an autogenerated integer id
     */
    @typeorm.PrimaryGeneratedColumn()
    id: number;

    /**
     * The agentId of the entity this record hold the phone number for
     */
    @typeorm.Column({ length: 32, unique: true })
    agent_id: string;

    /**
     * First 32 bytes of SHA256 hash of phone number
     */
    @typeorm.Column({ length: 32, nullable: true })
    phone_number_hash: string;

    /**
     * 6-digit OTP
     */
    @typeorm.Column({ nullable: true })
    otp: number;

    /**
     * Time when OTP is no longer valid
     */
    @typeorm.Column({ type: 'timestamp without time zone', nullable: true })
    otp_expiration_time: Date;
}
